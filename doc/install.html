<html>
<head>
<title>AdvanceMAME Installation</title>
</head>
<body>
<center><h2>AdvanceMAME Installation</h2></center>
<p>
This document describes the installation process of
the Advance programs.
<p>The sections of this document are:<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2">
<tr><td width="5%"></td><td colspan=3>
<a href="#1">1 System Requirements</a><br>
</td></tr>
<tr><td width="5%"></td><td width="5%"></td><td colspan=2>
<a href="#1.1">1.1 Linux</a><br>
</td></tr>
<tr><td width="5%"></td><td width="5%"></td><td colspan=2>
<a href="#1.2">1.2 DOS</a><br>
</td></tr>
<tr><td width="5%"></td><td width="5%"></td><td colspan=2>
<a href="#1.3">1.3 Windows</a><br>
</td></tr>
<tr><td width="5%"></td><td width="5%"></td><td colspan=2>
<a href="#1.4">1.4 Mac OS X/Generic Unix</a><br>
</td></tr>
<tr><td width="5%"></td><td colspan=3>
<a href="#2">2 Installation</a><br>
</td></tr>
<tr><td width="5%"></td><td colspan=3>
<a href="#3">3 Configuration</a><br>
</td></tr>
<tr><td width="5%"></td><td width="5%"></td><td colspan=2>
<a href="#3.1">3.1 AdvanceMAME</a><br>
</td></tr>
<tr><td width="5%"></td><td width="5%"></td><td colspan=2>
<a href="#3.2">3.2 AdvanceMENU</a><br>
</td></tr>
<tr><td width="5%"></td><td colspan=3>
<a href="#4">4 Video Hardware</a><br>
</td></tr>
<tr><td width="5%"></td><td width="5%"></td><td colspan=2>
<a href="#4.1">4.1 LCD screens</a><br>
</td></tr>
<tr><td width="5%"></td><td width="5%"></td><td colspan=2>
<a href="#4.2">4.2 Multi Sync monitors (or PC monitors)</a><br>
</td></tr>
<tr><td width="5%"></td><td width="5%"></td><td colspan=2>
<a href="#4.3">4.3 Fixed Sync Monitors</a><br>
</td></tr>
<tr><td width="5%"></td><td width="5%"></td><td colspan=2>
<a href="#4.4">4.4 Arcade Monitors</a><br>
</td></tr>
<tr><td width="5%"></td><td width="5%"></td><td colspan=2>
<a href="#4.5">4.5 TVs</a><br>
</td></tr>
<tr><td width="5%"></td><td width="5%"></td><td width="5%"></td><td>
<a href="#4.5.1">4.5.1 TVs with SCART</a><br>
</td></tr>
<tr><td width="5%"></td><td width="5%"></td><td width="5%"></td><td>
<a href="#4.5.2">4.5.2 TVs with S-Video</a><br>
</td></tr>
<tr><td width="5%"></td><td colspan=3>
<a href="#5">5 Video Setup</a><br>
</td></tr>
<tr><td width="5%"></td><td width="5%"></td><td colspan=2>
<a href="#5.1">5.1 Operation Modes</a><br>
</td></tr>
<tr><td width="5%"></td><td width="5%"></td><td width="5%"></td><td>
<a href="#5.1.1">5.1.1 Automatic Operation Mode</a><br>
</td></tr>
<tr><td width="5%"></td><td width="5%"></td><td width="5%"></td><td>
<a href="#5.1.2">5.1.2 Manual Operation Mode</a><br>
</td></tr>
<tr><td width="5%"></td><td width="5%"></td><td colspan=2>
<a href="#5.2">5.2 Troubleshooting</a><br>
</td></tr>
<tr><td width="5%"></td><td width="5%"></td><td width="5%"></td><td>
<a href="#5.2.1">5.2.1 Linux</a><br>
</td></tr>
<tr><td width="5%"></td><td width="5%"></td><td width="5%"></td><td>
<a href="#5.2.2">5.2.2 DOS</a><br>
</td></tr>
<tr><td width="5%"></td><td width="5%"></td><td width="5%"></td><td>
<a href="#5.2.3">5.2.3 Windows</a><br>
</td></tr>
<tr><td width="5%"></td><td colspan=3>
<a href="#6">6 Copyright</a><br>
</td></tr>
</table>
<h2><a name="1">1</a> 
System Requirements
</h2>
To run the Advance programs you may need to install and
configure some drivers and libraries on your system.
<p>
The following is a list of all that you need.
<p>
More details on the single drivers are present in the
`advdev.txt' documentation file.
<h3><a name="1.1">1.1</a> 
Linux
</h3>
To allow the Advance programs to display in X you must
install the SDL library. Generally it's already present in
all the recent distributions.
<p>
To allow the Advance programs to directly control your
video board in console mode, you must install and configure
the Linux Frame Buffer driver or a recent SVGALIB library.
<p>
The Linux Frame Buffer drivers are always included in the
Linux kernel source, but generally they must be explicitly
compiled or loaded. Please note that you cannot use the VESA
Linux Frame Buffer driver, you must use a driver specific for
your video board.
<p>
The SVGALIB library must be installed manually. Generally the
Linux distributions contain an old 1.4 version of the library,
but the Advance programs you need at least the version 1.9.14
available at:
<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td width="5%"></td><td width="95%">
<a href="http://www.svgalib.org/">http://www.svgalib.org/</a>
<br>
</td></tr></table>
<p>
For both the Frame Buffer driver and the SVGALIB library some
additional patches are available in the `contrib/' directory.
<p>
To allow the Advance programs to play sounds, you must have
installed the OSS or the ALSA audio system. Generally at least
one is always available in all the Linux distributions.
If you have the SDL library, it can also be used for the
sound output.
<p>
The Advance programs are able to use the Linux support for
input controllers like keyboards, joysticks and mice.
If you have the SDL library, it can also be used for the input
controllers.
<h3><a name="1.2">1.2</a> 
DOS
</h3>
The Advance programs already contain all the required drivers
for video, sound, and input controllers.
<p>
Generally you don't need to install additional software with
the exception of a mouse driver if you want to use one.
<h3><a name="1.3">1.3</a> 
Windows
</h3>
The Advance programs contain a copy of the SDL library
which allow them to work also in the Windows platform.
<p>
To allow the Advance programs to directly control your video
board, you must install the included SVGAWIN driver.
<p>
Please note that the SVGAWIN driver is EXPERIMENTAL software and
it works only for a few sets of video boards. More information is
present in the `svgawin.txt' documentation file.
<p>
The SDL library is also used for sound, and input controllers.
<h3><a name="1.4">1.4</a> 
Mac OS X/Generic Unix
</h3>
To allow the Advance programs to work you must install the SDL
library. This library is used for video, sound and input
controllers.
<p>
The SDL library is available at:
<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td width="5%"></td><td width="95%">
<a href="http://www.libsdl.org/">http://www.libsdl.org/</a>
<br>
</td></tr></table>
<h2><a name="2">2</a> 
Installation
</h2>
The suggested way to installing the Advance programs is to start
from the sources.
<p>
The build process is detailed in `build.txt' file, but generally
you need only the usual commands:
<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td width="5%"></td><td width="95%">
<pre>
./configure
make
make install
</pre>
</td></tr></table>
<p>
The exception is the DOS and Windows target. In this case it's
better to start from the binary distribution and don't compile
the source.
<h2><a name="3">3</a> 
Configuration
</h2>
All the Advance programs require a configuration process to work
correctly.
<p>
To create a default configuration file run the application from
a command shell and a standard configuration .rc file will be
created.
<p>
In Linux, Mac OS X and other Unix, the configuration file is
created in the user home directory in the subdirectory .advance/.
In DOS and Windows the configuration file is created in the
current directory.
<p>
When you have finished to modify the configuration file,
it's suggested to run the program with the `-remove' option
to remove all the default configuration options from the
configuration file.
<h3><a name="3.1">3.1</a> 
AdvanceMAME
</h3>
To run AdvanceMAME you need at least to set the `dir_rom' option
to the path there the roms resides.
<p>
If you want to run it as standard applications in a Window
Manager environment like X Window, Windows or Mac OS X Acqua,
you don't need to configure any video options. Instead, if you
want to enable the direct programming of the video board
you need to carefully follow the "Video Setup" chapter
in this file.
<h3><a name="3.2">3.2</a> 
AdvanceMENU
</h3>
To run AdvanceMENU you need to configure which emulator is
present in your system. If a known emulator is found, it's
configured automatically. In Linux and Mac OS X the
emulators are searched in the current PATH list, in DOS and
Windows only in the current directory.
<p>
Generally you need also to adjust the path where the
game's .png, .mp3 and .mng files reside with the
emulator_* options.
<h2><a name="4">4</a> 
Video Hardware
</h2>
The Advance programs are able to drive different types
of video hardware: LCD, Multi Sync monitors, Fixed
Sync monitors, Arcade monitors and TVs.
<p>
With the exception of PC Monitors that always accept the
VGA signal, for other monitors you should take in account
the required video signals and eventually use conversion
circuits to adapt signals.
<p>
A lot of useful links are available on the AdvanceMAME video
link page:
<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td width="5%"></td><td width="95%">
<a href="http://advancemame.sourceforge.net/video-link.html">http://advancemame.sourceforge.net/video-link.html</a>
<br>
</td></tr></table>
<h3><a name="4.1">4.1</a> 
LCD screens
</h3>
LCD screens have always a native fixed resolution. To get the
best image quality it's always suggested to use this resolution.
<p>
For this reason you usually don't need to enter any specific
configuration options, and let the program to use the default
video mode.
<p>
This mode of operation is the default when you are in
a graphics environment like X, Windows and Mac OS X.
<h3><a name="4.2">4.2</a> 
Multi Sync monitors (or PC monitors)
</h3>
Multi Sync monitors support a wide range of horizontal clocks
and requires a standard VGA connector. They are the normal PC
monitors.
<p>
With PC monitors you can choose to work without any configuration,
using only the default video mode, like a LCD screen, or configure
the clocks supported to allow a direct video mode generation
by the Advance programs.
<p>
You can generally find the range of clocks supported in the
monitor manual, generic values are:
<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td width="5%"></td><td width="95%">
<pre>
device_video_clock 10 - 150 / 30.5 - 60 / 55 - 130
</pre>
</td></tr></table>
<h3><a name="4.3">4.3</a> 
Fixed Sync Monitors
</h3>
Fixed Sync monitors support only a few fixed horizontal clocks.
Generally they requires separate 3,4 or 5 BNC connectors, with
the exception of old VGA monitors which requires a standard
VGA connector.
<p>
You must find the exact clocks supported in the monitor manual.
<p>
The standard clocks for VGA monitors are:
<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td width="5%"></td><td width="95%">
<pre>
device_video_clock 10 - 50 / 31.5 / 55 - 130
</pre>
</td></tr></table>
<p>
If the monitor uses separate H/V sync signals you can
directly use the VGA sync signals of your PC. If the monitor
uses composite sync, or sync-on-green you must use a sync
converter circuit.
<p>
These monitors are generally compatible with the VGA video
signal level of 0.7 V p-p.
<h3><a name="4.4">4.4</a> 
Arcade Monitors
</h3>
Arcade monitors support only a few fixed horizontal and
vertical clocks, generally the horizontal 15.75 and 25 kHz,
and only the vertical 60 Hz.
<p>
You must find the exact clocks supported in the monitor
manual.
<p>
Please note that the manuals of some Arcade Monitors
incorrectly state a wide range of horizontal frequency
like 15 - 31 kHz. Generally these monitors support only
the three fixed clocks of 15.75, 25, 31.1 kHz. An example
is the Wells-Gardner D9200.
<p>
The standard clocks for a Standard Resolution 15 kHz (CGA) are:
<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td width="5%"></td><td width="95%">
<pre>
device_video_clock 5 - 50 / 15.75 / 60
</pre>
</td></tr></table>
<p>
for a Extended Resolution 16 kHz are:
<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td width="5%"></td><td width="95%">
<pre>
device_video_clock 5 - 50 / 16.5 / 53
</pre>
</td></tr></table>
<p>
for a Medium Resolution 25 kHz (EGA) are:
<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td width="5%"></td><td width="95%">
<pre>
device_video_clock 5 - 50 / 25 / 60
</pre>
</td></tr></table>
<p>
If your monitor is multistandard, you can use more
clock specification separating them with the `;' char.
<p>
For example:
<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td width="5%"></td><td width="95%">
<pre>
device_video_clock 5 - 50 / 15.75 / 60 ; 5 - 50 / 25 / 60
</pre>
</td></tr></table>
<p>
If the monitor accepts separate H/V sync signals at
levels 0 - 5 V you can directly use the VGA sync signal of
your PC. If the monitor uses another sync signal you must
use a sync conversion circuit.
<p>
If the monitor accepts a composite sync signal, instead of
using a sync conversion circuits you can also try twisting
the two H and V VGA signal together. It works if you select
VGA negative H and V sync on the programs. To be on safe side
I DO NOT RECOMMEND THIS HACK to connect sync signals directly
together. Technically you should never just tie sync
signal lines together. They are not usually designed for
this, so this can damage your video card. If you try, use
with caution.
<p>
You must also ensure that the monitor accepts the VGA video
signal level of 0.7 V p-p. Generally arcade monitors require a
video signal between 1 V and 5 V for each line.
Therefore if you attempt to drive an arcade monitor with a
VGA video signal you will at most, have a very dark picture with
no contrast. You will need to buy/make an amplifier for each
line in order for it to work.
<h3><a name="4.5">4.5</a> 
TVs
</h3>
TVs generally supports only two fixed combination of
horizontal and vertical clocks, corresponding at the TV PAL
and NTSC standards.
<p>
Clocks values for PAL TV (European) are:
<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td width="5%"></td><td width="95%">
<pre>
device_video_clock 5 - 50 / 15.62 / 50
</pre>
</td></tr></table>
<p>
for NTSC TV (USA) are:
<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td width="5%"></td><td width="95%">
<pre>
device_video_clock 5 - 50 / 15.73 / 60
</pre>
</td></tr></table>
<p>
for PAL TV (European) which supports also NTSC TV (USA) modes
(common if you use the SCART input):
<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td width="5%"></td><td width="95%">
<pre>
device_video_clock 5 - 50 / 15.62 / 50 ; 5 - 50 / 15.73 / 60
</pre>
</td></tr></table>
<h4><a name="4.5.1">4.5.1</a> 
TVs with SCART
</h4>
If your TV has a SCART input, you can use directly the VGA
analog signal as RGB input.
<p>
A composite sync signal is required. It means that you must
use a sync converter circuit to convert the VGA H/V sync with
levels 0 - 5 V to a composite sync of levels 0 - 0.3 V.
<p>
The SCART input accepts also a composite video signal, but
the RGB video is far superior.
<p>
Remember what to enable the SCART RGB signal you must set
the SCART pin 16 at level 1 - 3 V (no more than 3 V).
And to automatically switch the TV to the AV signal you
must set the SCART pin 8 at level 9.5 - 12 V (for some
TVs 5 V may be enough).
<p>
If you have a recent VGA board, you can use the 5 V power
available on the VGA pin 9. Alternatively you can use the
5 V and 12 V PC internal power.
<h4><a name="4.5.2">4.5.2</a> 
TVs with S-Video
</h4>
If your TV has a S-Video input, you can use the TV-Out signal
of your VGA board.
<p>
The quality of the S-Video signal is near at the quality of
the RGB signal.
<p>
Unfortunately the TV-Out signal is generally not enabled
by the Advance programs. There are some external utilities
for Linux and Windows able to enable the TV-Out signal,
but their use is mainly untested.
<h2><a name="5">5</a> 
Video Setup
</h2>
The Advance programs have the ability to directly control your video
board to get the best possible fullscreen video modes with always the
correct size and aspect ratio.
<p>
This feature is available in Linux with the SVGALIB and Frame
Buffer libraries, in DOS with the SVGALIB and VBELINE libraries
and in Windows with the SVGAWIN library.
<p>
It isn't available in Mac OS X and other Unix, or generally if
your only detected video driver is the SDL library.
<p>
To make it possible, the programs need some information on your
monitor capability in the form of the supported pixel, horizontal
and vertical clocks.
<p>
With thies information the programs are able to always generate
`perfect' video modes for the emulated game.
<h3><a name="5.1">5.1</a> 
Operation Modes
</h3>
The programs support two basic ways to generated video modes:
the `automatic' and the `manual' operation mode.
<p>
In the `automatic' mode the programs automatically generate
a video mode from scratch. It's the simplest mode of operation.
<p>
In the `manual' mode the programs pick the video mode from a
manually defined list of modelines, eventually adjusting them
to match the game clock or size requirements.
This mode of operation should be used only if the `automatic'
mode doesn't work.
<p>
Please note that if you are using the SDL or VBE video
drivers, the programs aren't able to create or adjust video
modes. In this case you don't need to configure anything because
the programs can use only the video modes that your system
reports as available.
<p>
The SDL and VBE video drivers are only indicated to use
AdvanceMAME in a Window Manager system. Instead they can
be used with AdvanceMENU for the use with a normal PC monitor,
because AdvanceMENU only use standard video modes.
<h4><a name="5.1.1">5.1.1</a> 
Automatic Operation Mode
</h4>
In the automatic operation mode the programs automatically
create a `perfect' video mode for the game to be emulated
that fit exactly the whole screen with the correct aspect
and frame rate.
<p>
To configure and activate this mode you need to run the
`advcfg' utility for AdvanceMAME and `advcfg -advmenuc' for
AdvanceMENU, and answer at the various questions.
You don't need to create a list of video modes, any needed
video mode is created at runtime.
<p>
Before running the `advcfg' utility you should check your
monitor manual for the vertical and horizontal clocks
supported by your monitor.
<p>
The `advcfg' utility adds these options in your `advmame.rc':
<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td width="5%"></td><td width="95%">
<pre>
display_mode auto
display_adjust generate_yclock
device_video_clock ?
device_video_format ?
</pre>
</td></tr></table>
<p>
All these options are documented in the `advdev.txt'
and `advmame.txt' files.
<h4><a name="5.1.2">5.1.2</a> 
Manual Operation Mode
</h4>
In the manual operation mode the programs scan a list of `good'
video modelines created manually and chose the best available.
You must in advance create this list of video modelines with the
`advv' utility.
<p>
This is the description of the few basic steps required to run
the programs in the manual operation mode. All the options used
are documented in the `advdev.txt' file.
<ul>
<li>
For AdvanceMAME add in the in the file `advmame.rc' these
options:
</li>
</ul>
<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td width="5%"></td><td width="95%">
<pre>
display_mode auto
display_adjust x
</pre>
</td></tr></table>
<ul>
<li>
Add in the file `advmame.rc' or `advmenu.rc' the
`device_video_clock' option that specify which
pixel, horizontal and vertical clocks are supported
by your monitor.
Generally these values are specified in the technical
page of your monitor manual. You can see the
"Video Hardware" chapter in this file for some
examples.
</li>
</ul>
<ul>
<li>
Run the `advv' program for AdvanceMAME or `advv -advmenuv' for
AdvanceMENU.
</li>
</ul>
<ul>
<li>
Test the video modelines of your interest pressing ENTER
on them. If the mode isn't centered try centering it
with the ARROW keys. When you have finished press ENTER
to save your modifications or ESC to restore the
previous setting.
Returned in the video mode list, if the mode is
displayed correctly, you can select it to be used by
the programs pressing SPACE.
It's very important that in all the selected modes
the screen area is completely visible. Otherwise,
when playing, part of the game may be out of screen.
Video modes displayed in red aren't supported by
your video hardware.
</li>
</ul>
<ul>
<li>
When you have selected the list of `good' video modes press
F2 to save them in your configuration file.
</li>
</ul>
<ul>
<li>
Press ESC to exit from `advv'
</li>
</ul>
<p>
In the `contrib/modeline' dir are present some .rc file with
some example modelines. The same modelines are contained in
the `advv' program.
<h3><a name="5.2">5.2</a> 
Troubleshooting
</h3>
<ul>
<li>
Delete any old configuration files and restart from scratch.
</li>
</ul>
<ul>
<li>
If you are using a PC Multisync monitor and the image is
instable or the monitor automatically switches off, you
have probably entered wrong clock values.
Check the horizontal and vertical clock ranges
supported by your monitor in the monitor manual.
Eventually try with shorter ranges. Try for example
with:
</li>
</ul>
<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td width="5%"></td><td width="95%">
<pre>
device_video_clock 10 - 150 / 55 - 90 / 31 - 50
</pre>
</td></tr></table>
<ul>
<li>
If you are using an Arcade Monitor/TV and the image is
instable or completely black try increasing the lower
pixel clock limit. Some video boards aren't able to
output too low clocks. Instead of 5 try 8, 9, 10,
11, 12, ...
</li>
</ul>
<ul>
<li>
If interlaced video modes have swapped rows, try using
the `display_interlaceeffect' option to adjust the
image.
</li>
</ul>
<h4><a name="5.2.1">5.2.1</a> 
Linux
</h4>
<ul>
<li>
If you are using the `svgalib' driver ensure that you have
installed the most recent SVGALIB library. The old
1.4.x versions are not supported.
</li>
</ul>
<ul>
<li>
If you are using the `fb' driver, ensure to don't use the VESA
Frame Buffer. It doesn't work for the Advance programs.
</li>
</ul>
<ul>
<li>
If you are using the `fb' driver check the kernel patches
in the `contrib/fb' directory.
</li>
</ul>
<ul>
<li>
If you are using the `svgalib' driver check the svgalib patches
in the `contrib/svgalib' directory.
</li>
</ul>
<ul>
<li>
If you have both the `svgalib' and `fb' drivers, try forcing the
use of the `fb' driver instead of the `svgalib' driver
with the option:
</li>
</ul>
<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td width="5%"></td><td width="95%">
<pre>
device_video fb slang
</pre>
</td></tr></table>
<h4><a name="5.2.2">5.2.2</a> 
DOS
</h4>
<ul>
<li>
Try forcing the use of the `vbeline' driver instead of the
`svgaline' driver with the option:
</li>
</ul>
<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td width="5%"></td><td width="95%">
<pre>
device_video vbeline vgaline
</pre>
</td></tr></table>
<ul>
<li>
If your board has a VESA VBE 3.0 BIOS, try forcing the
`vbeline/vbe3' driver with the options:
</li>
</ul>
<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td width="5%"></td><td width="95%">
<pre>
device_video vbeline/vbe3 vgaline
</pre>
</td></tr></table>
<ul>
<li>
If you are using the `vbeline' driver try changing the
`vbeline_mode' option:
</li>
</ul>
<p>
<table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td width="5%"></td><td width="95%">
<pre>
device_video vbeline vgaline
device_vbeline_mode smaller
</pre>
</td></tr></table>
<h4><a name="5.2.3">5.2.3</a> 
Windows
</h4>
<ul>
<li>
Try reducing the video hardware acceleration from the
Control Panel.
</li>
</ul>
<h2><a name="6">6</a> 
Copyright
</h2>
This file is Copyright (C) 2003, 2004 Andrea Mazzoleni.
</body>
</html>
